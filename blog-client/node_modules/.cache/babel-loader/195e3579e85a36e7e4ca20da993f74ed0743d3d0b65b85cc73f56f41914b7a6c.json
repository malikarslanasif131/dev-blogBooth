{"ast":null,"code":"import _regeneratorRuntime from\"D:/NexT Courses/Node Js/Node Js Practice/Blog MERN Website/My Blog Project MERN/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/NexT Courses/Node Js/Node Js Practice/Blog MERN Website/My Blog Project MERN/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/NexT Courses/Node Js/Node Js Practice/Blog MERN Website/My Blog Project MERN/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Card from\"../components/Card\";import CategoryList from\"../components/CategoryList\";import Layout from\"../components/layout/Layout\";import axios from\"axios\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ByCategoryPage=function ByCategoryPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),dataLength=_useState6[0],setDataLength=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalPages=_useState8[0],setTotalPages=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),categoryId=_useState10[0],setCategoryId=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),categories=_useState12[0],setCategories=_useState12[1];useEffect(function(){function fetchCategory(){return _fetchCategory.apply(this,arguments);}function _fetchCategory(){_fetchCategory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:8080/api/category/get-all\").then(function(res){setCategories(res.data.category);});case 2:case\"end\":return _context.stop();}},_callee);}));return _fetchCategory.apply(this,arguments);}fetchCategory();},[]);useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"http://localhost:8080/api/blog/show-posts?page=\".concat(page)).then(function(res){setPosts(res.data.blogs);setDataLength(res.data.BlogCount);setTotalPages(Math.ceil(res.data.BlogCount/7));});case 2:case\"end\":return _context2.stop();}},_callee2);}));return _fetchData.apply(this,arguments);}fetchData();},[page]);function handlePaginationClick(newPage){window.scrollTo(0,0);setPage(newPage);}var paginationButtons=[];var _loop=function _loop(i){if(i===0){paginationButtons.push(/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mx-3 px-4 \".concat(page===1?\"disabled\":\"\"),onClick:function onClick(){handlePaginationClick(1);},disabled:page===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-less-than\"})},\"first\"));}else if(i===totalPages+1){paginationButtons.push(/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mx-3 px-4 \".concat(page===totalPages?\"disabled\":\"\"),onClick:function onClick(){handlePaginationClick(totalPages);},disabled:page===totalPages,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-greater-than\"})},\"last\"));}else{paginationButtons.push(/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mx-3 px-4 \".concat(i===page?\"active\":\"\"),onClick:function onClick(){handlePaginationClick(i);},children:i},i));}};for(var i=0;i<=totalPages+1;i++){_loop(i);}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 m-3 p-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"display-5 mx-2 p-2\",children:[\"All Posts\",\" \",/*#__PURE__*/_jsxs(\"small\",{className:\"fs-4\",children:[\"(\",dataLength?dataLength:\"0\",\")\"]}),/*#__PURE__*/_jsxs(\"small\",{className:\"fs-6 float-end m-4 p-1\",children:[\"Page No. \",page]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Card,{posts:posts}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-4\",children:paginationButtons})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 m-3 p-3\",children:/*#__PURE__*/_jsx(CategoryList,{categories:categories,page:page,setCategoryId:setCategoryId})})]})});};export default ByCategoryPage;","map":{"version":3,"names":["React","useEffect","useState","Card","CategoryList","Layout","axios","jsxs","_jsxs","jsx","_jsx","ByCategoryPage","_useState","_useState2","_slicedToArray","posts","setPosts","_useState3","_useState4","page","setPage","_useState5","_useState6","dataLength","setDataLength","_useState7","_useState8","totalPages","setTotalPages","_useState9","_useState10","categoryId","setCategoryId","_useState11","_useState12","categories","setCategories","fetchCategory","_fetchCategory","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","then","res","data","category","stop","fetchData","_fetchData","_callee2","_callee2$","_context2","concat","blogs","BlogCount","Math","ceil","handlePaginationClick","newPage","window","scrollTo","paginationButtons","_loop","i","push","className","onClick","disabled","children"],"sources":["D:/NexT Courses/Node Js/Node Js Practice/Blog MERN Website/My Blog Project MERN/client/src/pages/ByCategoryPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Card from \"../components/Card\";\r\nimport CategoryList from \"../components/CategoryList\";\r\nimport Layout from \"../components/layout/Layout\";\r\nimport axios from \"axios\";\r\n\r\nconst ByCategoryPage = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [dataLength, setDataLength] = useState(\"\");\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  // eslint-disable-next-line\r\n  const [categoryId, setCategoryId] = useState(0);\r\n\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchCategory() {\r\n      await axios\r\n        .get(\"http://localhost:8080/api/category/get-all\")\r\n        .then((res) => {\r\n          setCategories(res.data.category);\r\n        });\r\n    }\r\n    fetchCategory();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await axios\r\n        .get(`http://localhost:8080/api/blog/show-posts?page=${page}`)\r\n        .then((res) => {\r\n          setPosts(res.data.blogs);\r\n          setDataLength(res.data.BlogCount);\r\n          setTotalPages(Math.ceil(res.data.BlogCount / 7));\r\n        });\r\n    }\r\n    fetchData();\r\n  }, [page]);\r\n\r\n  function handlePaginationClick(newPage) {\r\n    window.scrollTo(0, 0);\r\n    setPage(newPage);\r\n  }\r\n\r\n  const paginationButtons = [];\r\n\r\n  for (let i = 0; i <= totalPages + 1; i++) {\r\n    if (i === 0) {\r\n      paginationButtons.push(\r\n        <button\r\n          key={\"first\"}\r\n          className={`btn btn-secondary mx-3 px-4 ${\r\n            page === 1 ? \"disabled\" : \"\"\r\n          }`}\r\n          onClick={() => {\r\n            handlePaginationClick(1);\r\n          }}\r\n          disabled={page === 1}\r\n        >\r\n          <i className=\"fa-solid fa-less-than\"></i>\r\n        </button>\r\n      );\r\n    } else if (i === totalPages + 1) {\r\n      paginationButtons.push(\r\n        <button\r\n          key={\"last\"}\r\n          className={`btn btn-secondary mx-3 px-4 ${\r\n            page === totalPages ? \"disabled\" : \"\"\r\n          }`}\r\n          onClick={() => {\r\n            handlePaginationClick(totalPages);\r\n          }}\r\n          disabled={page === totalPages}\r\n        >\r\n          <i className=\"fa-solid fa-greater-than\"></i>\r\n        </button>\r\n      );\r\n    } else {\r\n      paginationButtons.push(\r\n        <button\r\n          key={i}\r\n          className={`btn btn-secondary mx-3 px-4 ${\r\n            i === page ? \"active\" : \"\"\r\n          }`}\r\n          onClick={() => {\r\n            handlePaginationClick(i);\r\n          }}\r\n        >\r\n          {i}\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"row\">\r\n        {/* Left Panel of Page */}\r\n        <div className=\"col-md-8 m-3 p-3\">\r\n          <h4 className=\"display-5 mx-2 p-2\">\r\n            All Posts{\" \"}\r\n            <small className=\"fs-4\">({dataLength ? dataLength : \"0\"})</small>\r\n            <small className=\"fs-6 float-end m-4 p-1\">Page No. {page}</small>\r\n          </h4>\r\n          <hr />\r\n          <Card posts={posts} />\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            {paginationButtons}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Panel of Page */}\r\n        <div className=\"col-md-3 m-3 p-3\">\r\n          {/* =====================Small Card=========== */}\r\n          <CategoryList\r\n            categories={categories}\r\n            page={page}\r\n            setCategoryId={setCategoryId}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ByCategoryPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}